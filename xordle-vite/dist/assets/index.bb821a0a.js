var P=Object.defineProperty,K=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var v=(t,r,s)=>r in t?P(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,h=(t,r)=>{for(var s in r||(r={}))U.call(r,s)&&v(t,s,r[s]);if(g)for(var s of g(r))G.call(r,s)&&v(t,s,r[s]);return t},x=(t,r)=>K(t,_(r));import{j as k,r as f,R as J,a as W}from"./vendor.2d6b8063.js";const j=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function e(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}};j();const c=k.exports.jsx,d=k.exports.jsxs,I=k.exports.Fragment,C={MENU:"menu",CREATE:"create",JOIN:"join",EXIT:"exit",PLAY:"play"},M={MENU_OPTIONS:[{id:C.CREATE,text:"CREATE"},{id:C.JOIN,text:"JOIN"}],KEYS:{ROW_0:"qwertyuiop".toUpperCase().split(""),ROW_1:"asdfghjkl".toUpperCase().split(""),ROW_2:"zxcvbnm".toUpperCase().split("")},TRIANGLE_RIGHT:"/TriangleRight.png",BLANK:c(I,{children:"\xA0"})},m=h(h({},C),M),V="wss://xordle.herokuapp.com";let a=null;const T={},A=(t,r)=>T[t]=r,Y=()=>{if(a){console.warn("Socket already iniitialized");return}return A("SET_ID",t=>{a&&(a.id=t)}),a=new WebSocket(V),a.emit=(t,r)=>{a.send(JSON.stringify({action:t,payload:r}))},a.addEventListener("message",t=>{const{data:r}=t,{action:s,payload:e}=JSON.parse(r);T[s]&&T[s](e)}),console.log("Socket Initialized"),a},b={init:Y,listen:A},B=({children:t})=>(f.exports.useEffect(()=>{b.init()},[]),c(I,{children:t})),F=t=>{const{options:r,onClick:s,className:e}=t,n=()=>e?" "+e:"",l=i=>{const{id:o}=i.target;s&&o&&s(o)};return c("div",{className:"menu flex-col"+n(),onClick:l,children:r.map(({id:i,text:o})=>d("button",{id:i,children:[" ",o," "]},i))})};const w=t=>{switch(parseInt(t)){case 1:return"bg-green";case 2:return"bg-yellow";case 3:return"bg-neutral";case 4:return"bg-placeholder";default:return"bg-gray"}},z=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16));const $=t=>{const{keys:r,onClick:s,disabled:e}=t,n=i=>{var p,E;if(e)return;i.preventDefault();const o=((E=(p=i.touches)==null?void 0:p[0])==null?void 0:E.target.id)||i.target.id;s&&s({key:o})},l=(i,o,p)=>{const E=m.KEYS["ROW_"+i];return d("div",{className:"flex keyboard-row",children:[o,E.map(N=>c(R,{letter:N,status:(r==null?void 0:r[N])>=0?r[N]:3,id:N},N)),p]})};return d("div",{className:"keyboard flex-col "+(e?"disabled":""),onTouchEnd:n,onClick:n,children:[l(0),l(1),l(2,c(R,{letter:"ENTER",status:3,id:"enter"}),c(R,{letter:c(I,{children:"\xAB"}),status:3,id:"backspace"}))]})},R=({letter:t,status:r,className:s,id:e})=>{let n=["flex keyboard-key",w(r),s||""].join(" ");return d("button",{className:n,id:e,children:[" ",t," "]})},H=t=>{const{keys:r,history:s,inProgress:e,keyboardDisabled:n,onKeyPress:l,current:i}=t,o=f.exports.useRef(null),p=f.exports.useRef(null);f.exports.useEffect(()=>{var u;(u=o==null?void 0:o.current)==null||u.focus()},[o]),f.exports.useEffect(()=>{p.current.scrollIntoView()},[i]);const E=u=>{if(!n)switch(u.key.toUpperCase()){case"ENTER":l&&l("ENTER");break;case"BACKSPACE":l&&l(null);break;default:/^[a-zA-Z]$/.test(u.key)&&l&&l(u.key);break}},N=()=>{const u=[];for(let y=0;y<5;y++)u.push(c(O,{letter:i[y]||m.BLANK,status:4},z()));return u};return d("div",{className:"game-board flex-col flex-fill ",onKeyDown:E,tabIndex:"0",ref:o,children:[d("div",{className:"flex-col flex-fill overflow game-board-list",children:[s==null?void 0:s.map((u,y)=>c("div",{className:"flex",children:u==null?void 0:u.map((S,L)=>f.exports.createElement(O,x(h({},S),{key:S+L})))},u+y)),c("div",{className:"flex",ref:p,children:e&&N()})]}),c($,{keys:r,disabled:n,onClick:E})]})},O=({letter:t,status:r})=>{const s=["flex game-board-letter",w(r)].join(" ");return c("div",{className:"game-board-letter-wrapper",children:d("span",{className:s,children:[" ",t," "]})})},X=t=>{const{host:r,room:s}=t,[e,n]=f.exports.useState(null);f.exports.useEffect(()=>{a.emit("JOIN",{room:s}),b.listen("JOIN",n),b.listen("UPDATE",n)},[]);const l=()=>{r&&a.emit("START")},i=()=>{r&&a.emit("END")},o=p=>{p==="ENTER"?a.emit("ENTER_WORD"):p?a.emit("PRESS_LETTER",{letter:p}):a.emit("REMOVE_LETTER")};return d("div",{className:"flex-col flex-fill game",children:[(e==null?void 0:e.inProgress)&&!(e!=null&&e.turn)&&d("div",{className:"flex-col flex-fill game-end",children:[c("label",{className:"game-end-label",children:" Word: "}),d("label",{className:"game-end-word",children:[" ",e==null?void 0:e.word,"  "]}),c("button",{className:r?"":"hidden",onClick:i,children:" RESTART "})]}),(e==null?void 0:e.inProgress)&&c(H,{keys:e==null?void 0:e.keys,history:e==null?void 0:e.history,current:e==null?void 0:e.current,onKeyPress:o,inProgress:e==null?void 0:e.turn,keyboardDisabled:(e==null?void 0:e.turn)!==(a==null?void 0:a.id)}),!(e!=null&&e.inProgress)&&d("div",{className:"flex-col flex-fill game-lobby",children:[d("label",{className:"flex room-code",children:[" ",e==null?void 0:e.id," "]}),d("p",{className:"flex-col flex-fill",children:[" ",e==null?void 0:e.playerCount," PLAYER",(e==null?void 0:e.playerCount)>1?"S":""," "]}),c("button",{className:"start-btn",onClick:l,children:r?"START":"WAITING FOR HOST"})]})]})},q=()=>{const[t,r]=f.exports.useReducer(Z,Q),s=f.exports.useRef(!1);f.exports.useEffect(()=>{b.listen("CREATE",o=>{r({type:"viewJoin",payload:{room:o,host:!0}}),s.current=!1}),b.listen("VERIFY",o=>{s.current=!1,o&&r({type:"viewJoin",payload:{room:o,host:!1}})})},[]),f.exports.useEffect(()=>{setInterval(()=>{a.emit("PING_TEST")},6e4)},[]);const e=o=>{if(!s.current)switch(o){case m.CREATE:s.current=!0,a.emit("CREATE");break;case m.JOIN:r({type:"viewCodeInput"});break;case m.PLAY:s.current=!0,a.emit("VERIFY",{room:t.room});break;default:console.log(o);return}},n=o=>{r({type:"setCodeInput",payload:o.target.value.replace(/[^a-z]/gi,"").substring(0,5).toUpperCase()})},l=()=>{var o;return d("div",{className:"flex-col",children:[c("input",{className:"input",type:"text",placeholder:"ROOM CODE",value:t.room||"",onChange:n,spellCheck:"false",autoComplete:"false",autoFocus:!0}),c("button",{className:"flex play-btn "+(((o=t.room)==null?void 0:o.length)===5?"":"hidden"),onClick:()=>e(m.PLAY),children:c("img",{src:m.TRIANGLE_RIGHT})})]})};return c("div",{className:"app",children:c(B,{children:(()=>{switch(t.view){case"game":return c(X,{host:t.host,room:t.room});default:return d("div",{className:"main-screen flex-col flex-fill",children:[c("label",{className:"flex title-label",children:" XORDLE "}),t.view!=="codeInput"?c(F,{options:m.MENU_OPTIONS,onClick:e}):l()]})}})()})})},Z=(t,r)=>{const{type:s,payload:e}=r;switch(s){case"viewJoin":return x(h({},t),{view:"game",room:e.room,host:e.host});case"viewCodeInput":return x(h({},t),{view:"codeInput"});case"setCodeInput":return x(h({},t),{room:e});default:return h({},t)}},Q={view:m.VIEW,room:null};J.render(c(W.StrictMode,{children:c(q,{})}),document.getElementById("root"));
